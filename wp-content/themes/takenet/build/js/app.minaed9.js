$.fn.exists=function(){return $(this).length>0},function($){$(function(){function animationNextStep(event){function showNext(){$step++,$img.removeClass("visible").next().addClass("visible"),$(".steps :last-child").children().removeClass("active").eq($step-1).addClass("active")}function showPrev(){$step--,$img.removeClass("visible").prev().addClass("visible"),$(".steps :last-child").children().removeClass("active").eq($step-1).addClass("active")}var $img=$(".scrollAnimated").find("img.visible"),$step=parseInt($img.data("step"));return $step>=15?finishAnimation():void(canScrollNext===!0&&(event.wheelDelta?event.wheelDelta<0?showNext():$step-1>0&&showPrev():showNext(),setTimeout(function(){canScrollNext=!0},600),canScrollNext=!1))}function freezeScroll(){if("fixed"!=$("html").css("position")){var top=$("html").scrollTop()?$("html").scrollTop():$("body").scrollTop();window.innerWidth>$("html").width()&&$("html").css("overflow-y","scroll"),$("html").css({width:"100%",height:"100%",position:"fixed",top:-top})}}function unfreezeScroll(){"fixed"==$("html").css("position")&&($("html").css("position","static"),$("html, body").scrollTop(-parseInt($("html").css("top"))),$("html").css({position:"",width:"",height:"",top:"","overflow-y":""}))}function disableScroll(){window.addEventListener&&window.addEventListener("DOMMouseScroll",animationNextStep,!1),window.onwheel=animationNextStep,window.onmousewheel=document.onmousewheel=animationNextStep,window.ontouchmove=animationNextStep}function enableScroll(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",animationNextStep,!1),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,document.onkeydown=null}function finishAnimation(){animationCompleted=!0,$(".scrollAnimated").find("img.visible").removeClass("visible").parent().children().last().addClass("visible"),unfreezeScroll(),enableScroll()}function watchAnimation(){if(1==animationCompleted)return $(window).unbind("scroll",watchAnimation);var offset=$(window).scrollTop(),animatedSection=$(".scrollAnimated");offset+10>=animatedSection.offset().top&&(freezeScroll(),disableScroll())}$(window).scrollTop(0),$(".fix-link").each(function(){var $$=$(this);$$.attr("href",$$.attr("href").replace("en/index.html",""))}),"/"!=location.pathname&&"/en/"!=location.pathname&&$("[data-location]").each(function(){function removeLanguagePrefix(url){return url.replace(/\/en/gi,"")}var $$=$(this),_loc=removeLanguagePrefix($$.data("location")),_path=removeLanguagePrefix(location.pathname);_path.search(_loc)===-1&&_loc.search(_path)===-1||$$.addClass("active")}),$(window).scroll(function(event){var _offset=$(window).scrollTop(),footer_pos=$("footer").eq(0).offset().top-$(window).height(),break_pos=footer_pos-135,_main=$("main");_offset<break_pos?_main.hasClass("navbar-sticky")===!1&&_main.addClass("navbar-sticky"):_main.removeClass("navbar-sticky")}),"/"!==location.pathname&&"/en/"!==location.pathname||$(window).scroll(function(event){function removeColors(){colors.forEach(function(color){$(".navbar").removeClass(color)})}function changeColor(color){removeColors(),$(".navbar").addClass(colors[colors.indexOf(color)])}var _offset=$(window).scrollTop(),winHeight=$(window).height(),colors=["black","green-blue","purple","red"],offsets=[winHeight,$(".how-we-do").offset().top-winHeight/2,$(".our-world").offset().top-winHeight/2];changeColor(_offset>offsets[0]?"green-blue":"black"),_offset>offsets[1]&&changeColor("purple"),_offset>offsets[2]&&changeColor("red")}),$(".navbar .menu ul > li").hover(function(){var $nav=$(".navbar"),$$=$(this),$sub=$$.find(".sub-navbar");if($nav.hasClass("show-sub-navbar"))$nav.removeClass("show-sub-navbar"),$sub.find("nav").css({top:0}),$sub.stop().slideUp(400);else{$nav.addClass("show-sub-navbar"),$sub.stop().slideDown(200);var elmRef=$$;screen.width<768&&(elmRef=$$.parent().children("li").first()),$sub.find("nav").css({top:elmRef.position().top-elmRef.outerHeight(!0)+2})}});var slideshow=$(".big-slider .cycle-slideshow");if(slideshow.on("cycle-initialized cycle-before",function(event,options){progress=$(this).find(".cycle-slide-active .progress .bar"),progress.stop(!0).css("width",0)}),slideshow.on("cycle-initialized cycle-after",function(event,options){progress=$(this).find(".cycle-slide-active .progress .bar"),slideshow.is(".cycle-paused")||progress.animate({width:"100%"},options.timeout,"linear")}),slideshow.on("cycle-paused",function(event,options){progress=$(this).find(".cycle-slide-active .progress .bar"),progress.stop()}),slideshow.on("cycle-resumed",function(events,options,timeoutRemaining){progress=$(this).find(".cycle-slide-active .progress .bar"),progress.animate({width:"100%"},timeoutRemaining,"linear")}),$("[data-player]").exists()){var tag=document.createElement("script"),ref=document.getElementsByTagName("script")[0];tag.src="http://www.youtube.com/iframe_api",ref.parentNode.insertBefore(tag,ref),onYouTubeIframeAPIReady=function(){$("[data-player]").each(function(){function onPlayerStateChange(event){event.data==YT.PlayerState.ENDED&&$$.find(".start-video").fadeIn("normal")}var player,$$=$(this),videoId=($$.parent(),$$.data("video-id")),id=Math.ceil(1e6*Math.random());$$.append("<div id='player-"+id+"'></div>"),$("#player-"+id).hide(),$$.find(".thumbnail")[0].src="http://img.youtube.com/vi/"+videoId+"/hqdefault.jpg",player=new YT.Player("player-"+id,{videoId:videoId,playerVars:{autoplay:0,rel:0,showinfo:0},events:{onStateChange:onPlayerStateChange}});var ready=setInterval(function(){"undefined"!=typeof player&&"function"==typeof player.playVideo&&($$.find(".start-video").addClass("ready").click(function(){$(this).hide(),$$.find(".thumbnail_container").hide(),$("#player-"+id).show(),player.playVideo()}),clearInterval(ready))},100)})}}if($(".questions .question").click(function(){var $$=$(this),self_closing=!1;$$.parent().children().each(function(){var $$$=$(this);$$$.hasClass("active")&&($$$.find(".answer").stop().hide(400),$$$.removeClass("active"),$$.is($$$)&&(self_closing=!0))}),self_closing===!1&&($$.addClass("active"),$$.find(".answer").stop().show(600))}),$("main").hasClass("hotsite")){var animationCompleted=!1,canScrollNext=!0;$(".ico-skip-animation").click(function(){animationCompleted===!1&&finishAnimation(),$("html, body").stop().animate({scrollTop:$(".hotsite-banner").offset().top},600)}),$(".steps label").click(function(){var $step=$(this).data("step"),$imgs=$(".scrollAnimated").find("img").parent().children();$imgs.removeClass("visible").eq($step-1).addClass("visible"),$(".steps :last-child").children().removeClass("active").eq($step-1).addClass("active")}),$(window).scroll(watchAnimation)}if(screen.width<768){var iOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;iOS&&$("main.hotsite .hotsite-content .hotsite-header .container-bordered").css({height:screen.height})}$(".load-more button").click(function(){var _elms=$(".item-load-more:not(.visible)").slice(0,10).addClass("visible");0==_elms.length&&$(this).fadeOut(300)}),$(".other-sites").change(function(){var option=$(this).val();window.open(option,"_blank")})})}(jQuery);